<div class="lab-tool-wrapper video-wrapper"
     [ngClass]="{'linked':synchronized}">

  <div *ngIf="masterVideo"
       class="lab-tool-player-wrapper star-player-wrapper">
    <ui-video-player-wrapper #masterPLayer
                             [src]="masterVideo.path"
                             [poster]="masterVideo.thumbnail"
                             [synchronized]="synchronized"
                             [preview]="!studentVideo"
                             (durationEvent)="masterPlayerDuration($event)"
                             (playerEvent)="masterPLayerEvent($event)"
                             (playerStateChange)="masterPLayerStateChange($event)">
    </ui-video-player-wrapper>
  </div>
  <div class="controls-row"
       [ngClass]="{'linked':synchronized}">


    <ng-template [ngIf]="synchronized"
                 [ngIfElse]="notSyncronized">
      <div *ngIf="studentVideo"
           class="linked-controls">

        <div class="left-side-controls">
          <div role="button"
               class="icon"
               [ngClass]="{ 'icon-play-1':!playing, 'icon-pause-1':playing}"
               (click)="toggleVideos()">
          </div>
          <div role="button"
               class="icon icon-prew"
               (click)="jump('bwd')"></div>
          <div role="button"
               class="icon icon-next"
               (click)="jump('fwd')"></div>

        </div>

        <div class="center-controls">
          <button class="btn icon-btn btn-sm btn-success"
                  (click)="unsynchronize()"><span class="icon-unlink"></span>
            {{'LAB.unlinkVideos' | translate}}</button>
        </div>

        <div class="right-side-controls">

          <div class="speed-controls">

            <span>{{'LAB.speed' | translate}}:</span>
            <button class="btn btn-sm"
                    (click)="changePLayBackRate('minus')">
              <i class="icon-minus-1"></i>
            </button>
            <span class="btn btn-sm">{{playbackRate}}</span>
            <button class="btn btn-sm"
                    (click)="changePLayBackRate('plus')">
              <i class="icon-plus-1"></i>
            </button>

            <button class="btn btn-sm"
                    (click)="changePLayBackRate('def')">
              <i class="icon-restart"></i>
            </button>

          </div>

          <div role="button"
               class="icon vg-icon-stop text-warning"
               (click)="stop()"></div>
        </div>
      </div>
    </ng-template>

    <ng-template #notSyncronized>
      <div class="not-linked-controls">
        <button *ngIf="!synchronized"
                class="btn icon-btn btn-sm btn-success"
                (click)="synchronize()"><span class="icon-link"></span>
          {{'LAB.linkVideos' | translate}}</button>
      </div>

    </ng-template>


  </div>
  <div *ngIf="studentVideo"
       class="lab-tool-player-wrapper student-player-wrapper">
    <ui-video-player-wrapper #studentPLayer
                             [src]="studentVideo ? studentVideo.path : null"
                             [preview]="false"
                             [synchronized]="synchronized"
                             (playerEvent)="studentPLayerEvent($event)"
                             (playerStateChange)="studentPLayerStateChange($event)">
    </ui-video-player-wrapper>
  </div>

  <div *ngIf="synchronized"
       class="touch-controls"
       (tap)="onTap($event)"
       (panstart)="onPanStart($event)"
       (pan)="onPan($event)"></div>
</div>