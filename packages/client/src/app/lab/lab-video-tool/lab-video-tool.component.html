<div class="lab-tool-wrapper"
     [ngClass]="{'linked':synchronized, 'fullscreen':fullscreen}">

  <div *ngIf="masterVideo && studentVideo"
       class="controls-row">
    <div class="left-side">
      <div role="button"
           class="icon"
           [ngClass]="{'vg-icon-fullscreen':!fullscreen, 'vg-icon-fullscreen_exit':fullscreen}"
           (click)="toggleFullScreen()"></div>
      <div role="button"
           class="icon icon-practices icon-save"
           (click)="saveToPractices.emit()"></div>
    </div>
    <div class="right-side"
         (click)="toggleSync()">
      <label>{{synchronized ? ('LAB.unlinkVideos' | translate):('LAB.linkVideos' | translate)}}</label>

      <div role="button"
           uiToggleSwitch
           [state]="synchronized"
           [disabled]="!studentVideo"></div>
    </div>

  </div>

  <div *ngIf="masterVideo"
       class="lab-tool-player-wrapper star-player-wrapper">
    <ui-video-player-wrapper #masterPLayer
                             [src]="masterVideo.path"
                             [poster]="masterVideo.thumbnail"
                             [synchronized]="synchronized"
                             [preview]="false"
                             (durationEvent)="masterPlayerDuration($event)"
                             (playerEvent)="masterPLayerEvent($event)"
                             (playerStateChange)="masterPLayerStateChange($event)"
                             (isPlayerReady)="masterVideoReady()">
    </ui-video-player-wrapper>
  </div>

  <div *ngIf="studentVideo"
       class="lab-tool-player-wrapper student-player-wrapper">
    <div class="close-video-control">
      <button (click)="studentVideoClear()">close</button>
    </div>
    <ui-video-player-wrapper #studentPLayer
                             [src]="studentVideo ? studentVideo.path : null"
                             [preview]="false"
                             [synchronized]="synchronized"
                             [isMasterVideo]="false"
                             (durationEvent)="studentPlayerDuration($event)"
                             (playerEvent)="studentPLayerEvent($event)">
    </ui-video-player-wrapper>
  </div>

  <div class="lab-video-control" *ngIf="synchronized && studentVideo">
    <dsapp-custom-lab-controls [isPlaying]="playing"
                               [isHiddenTime]="true"
                               [isHiddenPlayback]="true"
                               [duration]="videoDurationSync"
                               [totalTimePassed]="studentPLayer.timePassed"
                               [playbackRate]="playbackRate"
                               (pan)="onPan($event)"
                               (togglePlay)="toggleVideos()"
                               (changePlaybackRate)="changePlaybackRate()"></dsapp-custom-lab-controls>
<!--    <div class="linked-controls">-->
<!--      <ui-player-controls [playing]="playing"-->
<!--                          (toggleVideos)="toggleVideos()"-->
<!--                          (stop)="stop()"></ui-player-controls>-->
<!--      <div class="right-side-controls">-->

<!--        <ui-player-speed-controls [playbackRate]="playbackRate"-->
<!--                                  (changePLayBackRate)="changePLayBackRate($event)">-->
<!--        </ui-player-speed-controls>-->

<!--      </div>-->
<!--    </div>-->
  </div>
</div>
